CREATE TABLE test4posttime_distance
(
  id serial NOT NULL,
  posttime_1 posttime,
  posttime_2 posttime,
  CONSTRAINT test4posttime_distance_pkey PRIMARY KEY (id)
)
WITH (
  OIDS=FALSE
);
NOTICE:  CREATE TABLE will create implicit sequence "test4posttime_distance_id_seq" for serial column "test4posttime_distance.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "test4posttime_distance_pkey" for table "test4posttime_distance"
INSERT INTO test4posttime_distance (posttime_1, posttime_2)
VALUES 
('2010-4-12T14:23:42','2010-4-12T14:23:42'),
('2010-5-12T14:23:42','2010-4-12T14:23:42'),
('2010-3-12T14:23:42','2010-4-12T14:23:42'),
('2010-4-12T14:23:42/2010-4-13T14:23:42','2010-5-12T14:23:42'), 
('2010-4-12T14:23:42/2010-4-13T14:23:42','2010-4-13T14:23:42'), 
('2010-4-12T14:23:42/2010-4-13T14:23:42','2010-4-12T17:23:42'), 
('2010-4-12T14:23:42/2010-4-13T14:23:42','2010-4-12T14:23:42'), 
('2010-4-12T14:23:42/2010-4-13T14:23:42','2009-5-12T14:23:42'), 
('1996-5-12T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('1997-4-12T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('2005-5-12T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('2010-4-13T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('2012-5-12T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('1994-4-12T14:23:42/1996-4-13T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('1994-4-12T14:23:42/1997-4-12T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('1994-4-12T14:23:42/2005-4-13T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('1997-4-12T14:23:42/1999-4-13T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('1997-4-12T14:23:42/2012-4-13T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('1999-4-12T14:23:42/2001-4-13T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('1994-4-12T14:23:42/2012-4-13T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('1997-4-12T14:23:42/2010-4-13T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('1998-4-12T14:23:42/2012-4-13T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('1999-4-12T14:23:42/2010-4-13T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('1994-4-12T14:23:42/2010-4-13T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('2010-4-13T14:23:42/2012-4-13T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'), 
('2012-4-13T14:23:42/5454-4-13T14:23:42','1997-4-12T14:23:42/2010-4-13T14:23:42'),
('2012-9-3T16:33:22.212','2012-9-17T12'),
('2009-7-1/2009-10-1T12','2009-10-1/2012-10-1'),
('TCS0012456157.0157','TCS0012456156.09/2456157.07553'),
('TCS0012456157.07553','TCS0012456156.09'),
('2012-5-14T19:27:22.2','2012-7-14T19:27:22.2'),
('2012-8-14T19:27:22.2','2012-7-14T19:27:22.2'),
('2012-7-14T19:27:22.2','2012-7-14T20:27:22.2'),
('TCS0012111222.345678','TCS0012111223.345678'),
('2010-4-12T14:23:42,2010-4-12T14:23:42','2012'),
('2010-5-12T14:23:42','2010-4-12T14:23:42,2011,2013,2015'),
('2010-3-12T14:23:42/2013,2017/2019','2010-4-12T14:23:42');
SELECT tm_distance(posttime_1, posttime_2) FROM test4posttime_distance;
    tm_distance     
--------------------
 P0
 P1M
 P1M
 P29D
 P0
 P0
 P0
 P11M
 P11M
 P0
 P0
 P13Y1D
 P2Y29D
 P11M29D
 P0
 P0
 P0
 P0
 P0
 P0
 P0
 P1Y
 P2Y
 P0
 P
 P2Y
 P13DT19H26M37.788S
 P0
 P0
 PT23H39M9.792S
 P2M
 P1M
 PT1H
 P1D
 NAP
 NAP
 NAP
(37 rows)

SELECT tm_distance_dec_day(posttime_1, posttime_2) FROM test4posttime_distance;
 tm_distance_dec_day 
---------------------
                   0
                  30
                  31
                  29
                   0
                   0
                   0
                 335
                 335
                   0
                   0
                4749
                 760
                 364
                   0
                   0
                   0
                   0
                   0
                   0
                   0
                 365
                 730
                   0
                   0
                 731
    13.8101595833333
                   0
                   0
             0.98553
                  61
                  31
  0.0416666666666667
                   1
                  -1
                  -1
                  -1
(37 rows)

